
## パッケージマネージャー
さまざまなソフトウェアやライブラリを**１つのパッケージとして扱い**、  
インストールやアップデートを行うことができるツール。  

インストールしたソフトウェアの**バージョン情報を管理し**、  
ソフトウェア同士の依存性を管理できる。  

Windows なら「**Chocolatey**」、  
macOS なら「**Homebrew**」、  
Node.js なら「**npm**」、などがある。  

<br>

Webサイトの制作では、**プロジェクトのディレクトリごとに使用している Node.js のバージョン**が異なる場合がある。  
そこで、バージョン別にインストール可能で、切り替えのできるCUIのツールがよく利用されている。  

macOS ではディレクトリごとに切り替えが容易な「**nodenv**」を使う。  

<br>
<br>

## nodenv をインストールする
macOs に nodenv をインストールするには、パッケージマネージャーの「**Homebrew**」を使用する。  

```rb
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

<br>

Homebrew では「**brew**」コマンドでバージョン情報を表示できる。  
```rb
$ brew -v
```
バージョン情報が表示されれば、インストール完了の証。  

<br>

続いて、`brew` コマンドを使って、**nodenv** をインストールする。  

```rb
$ brew install nodenv
```
nodenv の初期設定をシェルの設定ファイルへ追記するために、  
**echo** コマンドを使って記述を追加する。  
```yml
// シェルが zsh の場合
$ echo 'eval "$(nodenv init -)"' >> ~/.zshrc

// シェルが bash の場合
$echo 'eval "$(nodenv init -)"' >> ~/.bashrc
```

<br>

記述を追加したら設定ファイルを再読み込みするために、`source` コマンドを実行する。  
```yml
// シェルが zsh の場合
$ source ~/.zshrc

// シェルが bash の場合
$ source ~/.bashrc
```
nodenv が正しく設定されていることを確認するために、**nodenv-doctor** スクリプトを使用する。
```rb
$ curl -fsSL https://github.com/nodenv/nodenv-installer/raw/master/bin/nodenv-doctor | bash
```

<br>

実際に nodenv コマンドでバージョン情報を表示してみる。  
```rb
$ nodenv -v
```

<br>
<br>

## Node.js をインストールする
nodenv を使ってインストールできる Node.js のバージョンを確認する。  
```rb
$ nodenv install -l
```
コマンドは「**nodenv install バージョン番号**」でインストールできる。  

<br>

指定したバージョンがインストールできたら、**システム上で使用するバージョン**を指定する。  
```rb
$ nodenv global 16.13.1
```
また、nodenv を使ってインストールしたバージョンの一覧も確認できる。  
```rb
$ nodenv versions
```
> 「*」のついているバージョン番号が、現在使用しているバージョン。  

<br>
<br>

## 複数のバージョンを切り替える
使用するバージョンを切り替えるときは、  
切り替えたいバージョンをインストールした後「**nodenv global**」を使用する。  

また、特定のディレクトリのみ指定したバージョンを使用する場合は、  
該当ディレクトリに移動し、「**nodenv local**」を使用する。  
```4D
// 別のバージョンをインストールする
$ nodenv install 16.13.1

// システム全体で使えるように設定する
$ nodenv global 16.13.1
```
```4D
// 別のバージョンをインストールする
$ nodenv install 16.13.1

// 特定のディレクトリへ移動
$ cd mdn

// 特定のディレクトリのみ、16.13.1 を有効化する
$ nodenv local 16.13.1
```

<br>
<br>

## パッケージマネージャー「npm」
Node.js で動作するように作られたものには、  
**Sass** や **Gulp** など、数多くのツールやライブラリが存在する。  

それらのインストールやアップデート、バージョン情報などを含めて管理する  
パッケージマネージャーのことを **npm（Node Package Maneger）** という。  

npm は **Node.js** と一緒にインストールされ、インストール後は npm コマンドが利用できるようになる。  
```rb
$ npm --version
```

<br>
<br>

## npmコマンドを使ったインストール方法
インストール方法には、「**グローバルインストール**」と「**ローカルインストール**」の２つがある。  

グローバルインストールは**システム全体で使う場合に使用し**、  
パッケージはシステム側のディレクトリに格納される。  

ローカルインストールは**コマンドを実行したディレクトリ内**に「**node_modules**」ディレクトリが作成され、  
そこにパッケージが格納され、そのディレクトリ内でのみ使用できるようになる。  
```4D
// ローカルインストール
$ npm install sass

// グローバルインストール
$ npm install -g sass
```

<br>

インストールされたパッケージは、パッケージ名でのコマンド利用かローカルインストールであれば「**npx**」コマンドを使って実行可能。  

>  【 **memo** 】  
> npx コマンドは、npm のバージョン5.2以降で使えるコマンド  
> 従来までは、ローカルインストールされたライブラリのコマンドを実行する場合、  
> **Gulp** であれば `node_modules/gulp/bin/gulp.js` と入力する必要があったが、  
> npx コマンドを使えば**実態ファイルの指定**を省略して実行できる

<br>

#### Sassのローカルインストールとグローバルインストールでのコマンド使用例
```4D
// グローバルインストールしたパッケージの利用
$ sass --version

// グローバルインストールしたパッケージの利用
$ npx sass --version
```







